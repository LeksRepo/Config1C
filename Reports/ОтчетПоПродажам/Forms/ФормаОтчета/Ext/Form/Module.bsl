
&НаКлиенте
Процедура Сформировать(Команда)
	ТаблицаОтчета = СформироватьНаСервере(ПериодОтчета, СписокПодразделений);
КонецПроцедуры

&НаСервере
Функция СформироватьНаСервере(ПериодОтчета, СписокПодразделений)
	
	ТабДок = Отчеты.ОтчетПоПродажам.СформироватьОтчет(ПериодОтчета, СписокПодразделений);
	
	Возврат ТабДок;
	
КонецФункции

&НаКлиенте
Процедура СписокПодразделенийНажатие(Элемент, СтандартнаяОбработка)
	СтандартнаяОбработка = Ложь;
	ПараметрыФормы = Новый Структура("ОригинальныйСписок", СписокПодразделений);
	ОткрытьФорму("Справочник.Подразделения.Форма.ФормаВыбораНескольких", ПараметрыФормы, ЭтаФорма, Неопределено, Неопределено, Неопределено, Неопределено, РежимОткрытияОкнаФормы.Независимый);
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаВыбора(ВыбранноеЗначение, ИсточникВыбора)
	СписокПодразделений = ВыбранноеЗначение;
	ОбновитьСписокПодразделений();
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ОбновитьСписокПодразделений();
	
КонецПроцедуры

&НаКлиенте
Функция ОбновитьСписокПодразделений()
	
	Если СписокПодразделений.Количество() = 0 Тогда
		
		СписокПодразделений.Добавить();
		
	КонецЕсли;
	
КонецФункции

&НаКлиенте
Процедура ТабДокОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ОткрытьФорму("Отчет.ОтчетПоПродажам.Форма.ФормаРасшифровкаОтчета", Расшифровка);
	
КонецПроцедуры
