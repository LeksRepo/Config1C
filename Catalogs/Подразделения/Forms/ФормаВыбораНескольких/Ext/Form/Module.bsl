
&НаКлиенте
Процедура Все(Комана)

	Для каждого ъ Из Список Цикл
	
		ъ.Пометка = Истина;
	
	КонецЦикла;
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ДоступныВсеПодразделения = Ложь;
	
	РолиВсеПодразделения = Новый Массив;
	РолиВсеПодразделения.Добавить("ГлавныйБухгалтер");
	РолиВсеПодразделения.Добавить("ТолькоПросмотр");
	РолиВсеПодразделения.Добавить("Администратор");
	
	Для каждого ъ Из РолиВсеПодразделения Цикл
		
		ДоступныВсеПодразделения = РольДоступна(ъ) ИЛИ ДоступныВсеПодразделения;
	
	КонецЦикла;
	
	Если ДоступныВсеПодразделения Тогда
		
		Запрос = Новый Запрос;
		Запрос.Текст =
		"ВЫБРАТЬ
		|	Подразделения.Ссылка
		|ИЗ
		|	Справочник.Подразделения КАК Подразделения
		|ГДЕ
		|	(НЕ Подразделения.ПометкаУдаления)";
		
		Список.ЗагрузитьЗначения(Запрос.Выполнить().Выгрузить().ВыгрузитьКолонку("Ссылка"));
		
	Иначе
		Список = ЛексСервер.ПолучитьСписокДоступныхПодразделений(ОбщегоНазначения.ПолучитьПараметрСеанса("ТекущийПользователь"));		
	КонецЕсли;
	
	Для каждого ъ Из Параметры.ОригинальныйСписок Цикл
		
		ЗначениеПолногоСписка = Неопределено;
		ЗначениеПолногоСписка = Список.НайтиПоЗначению(ъ.Значение);
		
		Если ЗначениеПолногоСписка <> Неопределено Тогда
			ЗначениеПолногоСписка.Пометка = Истина;
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура Выбрать(Команда)
	
	Если НЕ ВладелецФормы = Неопределено Тогда
		ОповеститьОВыборе(Список);
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура Розничные(Команда)
	
	РозничныеНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура РозничныеНаСервере()

	Для каждого ъ Из Список Цикл
		ъ.Пометка = ъ.Значение.ТипОрганизации = Перечисления.ТипыОрганизации.Розница;
	КонецЦикла;

КонецПроцедуры // РозничныеНаСервере()

&НаКлиенте
Процедура Производственные(Команда)
	
	ПроизводственныеНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура ПроизводственныеНаСервере()

	Для каждого ъ Из Список Цикл
		ъ.Пометка = ъ.Значение.ТипОрганизации = Перечисления.ТипыОрганизации.Производство;
	КонецЦикла;

КонецПроцедуры // ПроизводственныеНаСервере()

&НаКлиенте
Процедура Инвертировать(Команда)
	
	Для каждого ъ Из Список Цикл
		ъ.Пометка = НЕ ъ.Пометка;
	КонецЦикла;
	
КонецПроцедуры

&НаКлиенте
Процедура ПоЮридическомуЛицу(Команда)
	
	ПоЮридическомуЛицуСервере(ОткрытьФормуМодально("Справочник.Организации.ФормаВыбора"));
	
КонецПроцедуры

&НаСервере
Процедура ПоЮридическомуЛицуСервере(Организация)

	Для каждого ъ Из Список Цикл
		ъ.Пометка = ъ.Значение.Организация = Организация;
	КонецЦикла;

КонецПроцедуры // ПоЮридическомуЛицуСервере()

&НаКлиенте
Процедура Очистить(Команда)
	
	Для каждого ъ Из Список Цикл
	
		ъ.Пометка = Ложь;
	
	КонецЦикла;
	
КонецПроцедуры
