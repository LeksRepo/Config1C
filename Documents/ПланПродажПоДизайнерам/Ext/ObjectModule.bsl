
Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	Для каждого Строка Из СписокДизайнеров Цикл
		
		СоздатьПроводки(Строка.Дизайнер, Перечисления.ВидыПоказателейСотрудников.ВыручкаПлан, Строка.Выручка);
		
	КонецЦикла;
	
	Движения.Продажи.Записывать = Истина;
	Движения.Управленческий.Записывать = Истина;
	
КонецПроцедуры

Функция СоздатьПроводки(Сотрудник, Показатель, Значение)
	
	//Проводка = Движения.Продажи.Добавить();
	//Проводка.Подразделение = Подразделение;
	//Проводка.Период = Дата;
	//Проводка.Показатель = Показатель;
	//Проводка.Дизайнер = Сотрудник;
	//Проводка.Значение = Значение;
	
	Проводка = Движения.Управленческий.Добавить();
	Проводка.Подразделение = Подразделение;
	Проводка.Период = Дата;
	Проводка.Сумма = Значение;
	Проводка.СчетДт = ПланыСчетов.Управленческий.ПоказателиСотрудника;
	Проводка.СубконтоДт[ПланыВидовХарактеристик.ВидыСубконто.ВидыПоказателейСотрудников] = Показатель;
	Проводка.СубконтоДт[ПланыВидовХарактеристик.ВидыСубконто.ФизическиеЛица] = Сотрудник;
	
КонецФункции

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	
	Если ПометкаУдаления Тогда
		Возврат;
	КонецЕсли;
	
	ДатыЗапретаИзменения.ПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента(ЭтотОбъект, Отказ, РежимЗаписи, РежимПроведения);
	СуммаДокумента = СписокДизайнеров.Итог("Выручка");
	
КонецПроцедуры
