<?xml version="1.0" encoding="UTF-8"?>
<Form xmlns="http://v8.1c.ru/8.3/xcf/logform" xmlns:app="http://v8.1c.ru/8.2/managed-application/core" xmlns:cfg="http://v8.1c.ru/8.1/data/enterprise/current-config" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:ent="http://v8.1c.ru/8.1/data/enterprise" xmlns:lf="http://v8.1c.ru/8.2/managed-application/logform" xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows" xmlns:xr="http://v8.1c.ru/8.3/xcf/readable" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.1">
	<AutoCommandBar name="ФормаКоманднаяПанель" id="-1">
		<ChildItems>
			<Button name="ФормаСоздать" id="40">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.Create</CommandName>
				<ExtendedTooltip name="ФормаСоздатьРасширеннаяПодсказка" id="41"/>
			</Button>
			<Button name="ФормаСкопировать" id="42">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.Copy</CommandName>
				<ExtendedTooltip name="ФормаСкопироватьРасширеннаяПодсказка" id="43"/>
			</Button>
			<Button name="ФормаИзменить" id="44">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.Change</CommandName>
				<ExtendedTooltip name="ФормаИзменитьРасширеннаяПодсказка" id="45"/>
			</Button>
			<Button name="ФормаУстановитьПометкуУдаления" id="46">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.SetDeletionMark</CommandName>
				<ExtendedTooltip name="ФормаУстановитьПометкуУдаленияРасширеннаяПодсказка" id="47"/>
			</Button>
			<Button name="ФормаУстановитьИнтервал" id="52">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.SetDateInterval</CommandName>
				<ExtendedTooltip name="ФормаУстановитьИнтервалРасширеннаяПодсказка" id="53"/>
			</Button>
			<Button name="ФормаНайти" id="48">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.Find</CommandName>
				<ExtendedTooltip name="ФормаНайтиРасширеннаяПодсказка" id="49"/>
			</Button>
			<Button name="ФормаОтменитьПоиск" id="50">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.CancelSearch</CommandName>
				<ExtendedTooltip name="ФормаОтменитьПоискРасширеннаяПодсказка" id="51"/>
			</Button>
			<Button name="ФормаГрафикЗамеров" id="35">
				<Type>CommandBarButton</Type>
				<CommandName>Form.Command.ГрафикЗамеров</CommandName>
				<ExtendedTooltip name="ФормаГрафикЗамеровРасширеннаяПодсказка" id="36"/>
			</Button>
			<Button name="ФормаВывестиСписок" id="54">
				<Type>CommandBarButton</Type>
				<Visible>false</Visible>
				<CommandName>Form.Item.Список.StandardCommand.OutputList</CommandName>
				<ExtendedTooltip name="ФормаВывестиСписокРасширеннаяПодсказка" id="55"/>
			</Button>
		</ChildItems>
	</AutoCommandBar>
	<Events>
		<Event name="OnCreateAtServer">ПриСозданииНаСервере</Event>
	</Events>
	<ChildItems>
		<Table name="Список" id="1">
			<UseAlternationRowColor>true</UseAlternationRowColor>
			<EnableStartDrag>true</EnableStartDrag>
			<DataPath>Список</DataPath>
			<RowPictureDataPath>Список.DefaultPicture</RowPictureDataPath>
			<SearchStringLocation>None</SearchStringLocation>
			<ViewStatusLocation>None</ViewStatusLocation>
			<SearchControlLocation>None</SearchControlLocation>
			<AutoRefresh>false</AutoRefresh>
			<AutoRefreshPeriod>60</AutoRefreshPeriod>
			<Period>
				<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
				<v8:startDate>0001-01-01T00:00:00</v8:startDate>
				<v8:endDate>0001-01-01T00:00:00</v8:endDate>
			</Period>
			<ChoiceFoldersAndItems>Items</ChoiceFoldersAndItems>
			<RestoreCurrentRow>false</RestoreCurrentRow>
			<TopLevelParent xsi:nil="true"/>
			<ShowRoot>true</ShowRoot>
			<AllowRootChoice>false</AllowRootChoice>
			<UpdateOnDataChange>Auto</UpdateOnDataChange>
			<ContextMenu name="СписокКонтекстноеМеню" id="2"/>
			<AutoCommandBar name="СписокКоманднаяПанель" id="3">
				<Autofill>false</Autofill>
			</AutoCommandBar>
			<ExtendedTooltip name="СписокРасширеннаяПодсказка" id="4"/>
			<SearchStringAddition name="СписокСтрокаПоиска" id="62">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchStringRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСтрокаПоискаКонтекстноеМеню" id="63"/>
				<ExtendedTooltip name="СписокСтрокаПоискаРасширеннаяПодсказка" id="64"/>
			</SearchStringAddition>
			<ViewStatusAddition name="СписокСостояниеПросмотра" id="65">
				<AdditionSource>
					<Item>Список</Item>
					<Type>ViewStatusRepresentation</Type>
				</AdditionSource>
				<ContextMenu name="СписокСостояниеПросмотраКонтекстноеМеню" id="66"/>
				<ExtendedTooltip name="СписокСостояниеПросмотраРасширеннаяПодсказка" id="67"/>
			</ViewStatusAddition>
			<SearchControlAddition name="СписокУправлениеПоиском" id="68">
				<AdditionSource>
					<Item>Список</Item>
					<Type>SearchControl</Type>
				</AdditionSource>
				<ContextMenu name="СписокУправлениеПоискомКонтекстноеМеню" id="69"/>
				<ExtendedTooltip name="СписокУправлениеПоискомРасширеннаяПодсказка" id="70"/>
			</SearchControlAddition>
			<Events>
				<Event name="Selection">СписокВыбор</Event>
			</Events>
			<ChildItems>
				<LabelField name="ДатаЗамера" id="14">
					<DataPath>Список.ДатаЗамера</DataPath>
					<FixingInTable>Left</FixingInTable>
					<Width>12</Width>
					<ContextMenu name="ДатаЗамераКонтекстноеМеню" id="15"/>
					<ExtendedTooltip name="ДатаЗамераРасширеннаяПодсказка" id="16"/>
				</LabelField>
				<PictureField name="ЕстьЗаметка" id="59">
					<DataPath>Список.ЕстьЗаметка</DataPath>
					<TitleLocation>None</TitleLocation>
					<FixingInTable>Left</FixingInTable>
					<HeaderPicture>
						<xr:Ref>CommonPicture.Заметка</xr:Ref>
						<xr:LoadTransparent>true</xr:LoadTransparent>
					</HeaderPicture>
					<ValuesPicture>
						<xr:Ref>CommonPicture.Заметка</xr:Ref>
						<xr:LoadTransparent>true</xr:LoadTransparent>
					</ValuesPicture>
					<ContextMenu name="ЕстьЗаметкаКонтекстноеМеню" id="60"/>
					<ExtendedTooltip name="ЕстьЗаметкаРасширеннаяПодсказка" id="61"/>
				</PictureField>
				<LabelField name="КоличествоСпецификаций" id="23">
					<DataPath>Список.Спецификаций</DataPath>
					<TitleLocation>None</TitleLocation>
					<ToolTip>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Количество спецификаций к замеру</v8:content>
						</v8:item>
					</ToolTip>
					<FixingInTable>Left</FixingInTable>
					<HeaderPicture>
						<xr:Ref>CommonPicture.Рассчитать</xr:Ref>
						<xr:LoadTransparent>true</xr:LoadTransparent>
					</HeaderPicture>
					<Width>2</Width>
					<ContextMenu name="КоличествоСпецификацийКонтекстноеМеню" id="24"/>
					<ExtendedTooltip name="КоличествоСпецификацийРасширеннаяПодсказка" id="25"/>
				</LabelField>
				<InputField name="ПрикрепленныеФайлы" id="29">
					<DataPath>Список.Файлов</DataPath>
					<TitleLocation>None</TitleLocation>
					<ToolTip>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Прикреплено файлов</v8:content>
						</v8:item>
					</ToolTip>
					<FixingInTable>Left</FixingInTable>
					<HeaderPicture>
						<xr:Ref>CommonPicture.Сканирование</xr:Ref>
						<xr:LoadTransparent>true</xr:LoadTransparent>
					</HeaderPicture>
					<Width>2</Width>
					<HorizontalStretch>false</HorizontalStretch>
					<ContextMenu name="ПрикрепленныеФайлыКонтекстноеМеню" id="30"/>
					<ExtendedTooltip name="ПрикрепленныеФайлыРасширеннаяПодсказка" id="31"/>
				</InputField>
				<LabelField name="Номер" id="5">
					<DataPath>Список.Номер</DataPath>
					<FixingInTable>Left</FixingInTable>
					<ContextMenu name="НомерКонтекстноеМеню" id="6"/>
					<ExtendedTooltip name="НомерРасширеннаяПодсказка" id="7"/>
				</LabelField>
				<LabelField name="АдресЗамера" id="11">
					<DataPath>Список.АдресЗамера</DataPath>
					<ContextMenu name="АдресЗамераКонтекстноеМеню" id="12"/>
					<ExtendedTooltip name="АдресЗамераРасширеннаяПодсказка" id="13"/>
				</LabelField>
				<LabelField name="Замерщик" id="17">
					<DataPath>Список.Замерщик</DataPath>
					<ContextMenu name="ЗамерщикКонтекстноеМеню" id="18"/>
					<ExtendedTooltip name="ЗамерщикРасширеннаяПодсказка" id="19"/>
				</LabelField>
				<LabelField name="ИмяЗаказчика" id="20">
					<DataPath>Список.ИмяЗаказчика</DataPath>
					<ContextMenu name="ИмяЗаказчикаКонтекстноеМеню" id="21"/>
					<ExtendedTooltip name="ИмяЗаказчикаРасширеннаяПодсказка" id="22"/>
				</LabelField>
				<LabelField name="Телефон" id="32">
					<DataPath>Список.Телефон</DataPath>
					<ContextMenu name="ТелефонКонтекстноеМеню" id="33"/>
					<ExtendedTooltip name="ТелефонРасширеннаяПодсказка" id="34"/>
				</LabelField>
				<LabelField name="Автор" id="8">
					<DataPath>Список.Автор</DataPath>
					<ContextMenu name="АвторКонтекстноеМеню" id="9"/>
					<ExtendedTooltip name="АвторРасширеннаяПодсказка" id="10"/>
				</LabelField>
				<LabelField name="Офис" id="56">
					<DataPath>Список.Офис</DataPath>
					<ContextMenu name="ОфисКонтекстноеМеню" id="57"/>
					<ExtendedTooltip name="ОфисРасширеннаяПодсказка" id="58"/>
				</LabelField>
			</ChildItems>
		</Table>
	</ChildItems>
	<Attributes>
		<Attribute name="Список" id="1">
			<Type>
				<v8:Type>cfg:DynamicList</v8:Type>
			</Type>
			<MainAttribute>true</MainAttribute>
			<UseAlways>
				<Field>Список.Ссылка</Field>
			</UseAlways>
			<Settings xsi:type="DynamicList">
				<ManualQuery>true</ManualQuery>
				<DynamicDataRead>true</DynamicDataRead>
				<QueryText>ВЫБРАТЬ
	докЗамер.АдресЗамера КАК АдресЗамера,
	докЗамер.Замерщик КАК Замерщик,
	докЗамер.ИмяЗаказчика КАК ИмяЗаказчика,
	докЗамер.Телефон КАК Телефон,
	докЗамер.Номер КАК Номер,
	докЗамер.Офис КАК Офис,
	докЗамер.Дата КАК ДатаЗамера,
	докЗамер.Автор КАК Автор,
	докЗамер.Ссылка КАК Ссылка,
	ЕСТЬNULL(ЗапросФайлы.Значение, 0) КАК Файлов,
	ЕСТЬNULL(ЗапросСпецификации.Значение, 0) КАК Спецификаций,
	ЕСТЬNULL(ЗапросДоговоры.Значение, 0) КАК Договоров,
	ВЫБОР
		КОГДА ЕСТЬNULL(НаличиеЗаметокПоПредмету.ЕстьЗаметка, ЛОЖЬ)
			ТОГДА 0
		ИНАЧЕ -1
	КОНЕЦ КАК ЕстьЗаметка
ИЗ
	Документ.Замер КАК докЗамер
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			КОЛИЧЕСТВО(РАЗЛИЧНЫЕ ДокСпецификация.Ссылка) КАК Значение,
			ДокЗамер.Ссылка КАК Ссылка
		ИЗ
			Документ.Замер КАК ДокЗамер
				ЛЕВОЕ СОЕДИНЕНИЕ Документ.Спецификация КАК ДокСпецификация
				ПО (ДокСпецификация.ДокументОснование = ДокЗамер.Ссылка)
		
		СГРУППИРОВАТЬ ПО
			ДокЗамер.Ссылка) КАК ЗапросСпецификации
		ПО докЗамер.Ссылка = ЗапросСпецификации.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Замер.Ссылка КАК Ссылка,
			КОЛИЧЕСТВО(РАЗЛИЧНЫЕ Файлы.Ссылка) КАК Значение
		ИЗ
			Документ.Замер КАК Замер
				ЛЕВОЕ СОЕДИНЕНИЕ Справочник.Файлы КАК Файлы
				ПО (Файлы.ВладелецФайла = Замер.Ссылка)
		
		СГРУППИРОВАТЬ ПО
			Замер.Ссылка) КАК ЗапросФайлы
		ПО докЗамер.Ссылка = ЗапросФайлы.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ (ВЫБРАТЬ
			Замер.Ссылка КАК Ссылка,
			КОЛИЧЕСТВО(РАЗЛИЧНЫЕ Договор.Ссылка) КАК Значение
		ИЗ
			Документ.Замер КАК Замер
				ЛЕВОЕ СОЕДИНЕНИЕ Документ.Договор КАК Договор
				ПО (Договор.Проведен)
					И Замер.Ссылка = Договор.Спецификация.ДокументОснование
		
		СГРУППИРОВАТЬ ПО
			Замер.Ссылка) КАК ЗапросДоговоры
		ПО докЗамер.Ссылка = ЗапросДоговоры.Ссылка
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.НаличиеЗаметокПоПредмету КАК НаличиеЗаметокПоПредмету
		ПО докЗамер.Ссылка = НаличиеЗаметокПоПредмету.Предмет</QueryText>
				<MainTable>Document.Замер</MainTable>
				<ListSettings>
					<dcsset:filter>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>dfcece9d-5077-440b-b6b3-45a5cb4538eb</dcsset:userSettingID>
					</dcsset:filter>
					<dcsset:order>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>88619765-ccb3-46c6-ac52-38e9c992ebd4</dcsset:userSettingID>
					</dcsset:order>
					<dcsset:conditionalAppearance>
						<dcsset:item>
							<dcsset:selection>
								<dcsset:item>
									<dcsset:field>Автор</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>АдресЗамера</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>ДатаЗамера</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Договоров</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Замерщик</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>ИмяЗаказчика</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Номер</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Офис</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Спецификаций</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Ссылка</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Телефон</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>Файлов</dcsset:field>
								</dcsset:item>
								<dcsset:item>
									<dcsset:field>ЕстьЗаметка</dcsset:field>
								</dcsset:item>
							</dcsset:selection>
							<dcsset:filter>
								<dcsset:item xsi:type="dcsset:FilterItemComparison">
									<dcsset:left xsi:type="dcscor:Field">Договоров</dcsset:left>
									<dcsset:comparisonType>Greater</dcsset:comparisonType>
									<dcsset:right xsi:type="xs:decimal">0</dcsset:right>
								</dcsset:item>
							</dcsset:filter>
							<dcsset:appearance>
								<dcscor:item xsi:type="dcsset:SettingsParameterValue">
									<dcscor:parameter>ЦветФона</dcscor:parameter>
									<dcscor:value xsi:type="v8ui:Color">web:LightGreen</dcscor:value>
								</dcscor:item>
							</dcsset:appearance>
						</dcsset:item>
						<dcsset:viewMode>Normal</dcsset:viewMode>
						<dcsset:userSettingID>b75fecce-942b-4aed-abc9-e6a02e460fb3</dcsset:userSettingID>
					</dcsset:conditionalAppearance>
				</ListSettings>
			</Settings>
		</Attribute>
		<Attribute name="ДолгийРасчетСтоимости" id="2">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Долгий расчет стоимости</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</Type>
		</Attribute>
		<Attribute name="ЕстьДоговор" id="3">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Есть договор</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</Type>
		</Attribute>
		<Attribute name="НетСпецификации" id="4">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Нет спецификации</v8:content>
				</v8:item>
			</Title>
			<Type>
				<v8:Type>xs:string</v8:Type>
				<v8:StringQualifiers>
					<v8:Length>0</v8:Length>
					<v8:AllowedLength>Variable</v8:AllowedLength>
				</v8:StringQualifiers>
			</Type>
		</Attribute>
	</Attributes>
	<Commands>
		<Command name="ГрафикЗамеров" id="1">
			<Title>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>График замеров</v8:content>
				</v8:item>
			</Title>
			<ToolTip>
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>График замеров</v8:content>
				</v8:item>
			</ToolTip>
			<Action>ГрафикЗамеров</Action>
		</Command>
	</Commands>
</Form>