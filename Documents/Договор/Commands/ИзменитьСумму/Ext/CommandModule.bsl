
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	Договор = ПараметрКоманды;
	
	Парам = Новый Структура();
	Парам.Вставить("Сумма", ПолучитьСумму(Договор));

	НоваяСумма = ОткрытьФормуМодально("Документ.Договор.Форма.ФормаСуммаДокумента", Парам);
	
	ЗаписатьСумму(НоваяСумма,Договор);
	
	Если ПараметрыВыполненияКоманды.Источник.ИмяФормы = "Документ.Договор.Форма.ФормаДокумента" Тогда
		ПараметрыВыполненияКоманды.Источник.Прочитать();	
	КонецЕсли
	
КонецПроцедуры

&НаСервере
Функция ПолучитьСумму(Договор)
	Возврат Договор.СуммаДокумента;	
КонецФункции

&НаСервере
Процедура ЗаписатьСумму(НоваяСумма, Договор)
	
	Об = Договор.ПолучитьОбъект(); 
	Об.СуммаДокумента = НоваяСумма;
	Об.СуммаДокументаБезСкидки = НоваяСумма;
	Об.Записать();	
	
КонецПроцедуры
