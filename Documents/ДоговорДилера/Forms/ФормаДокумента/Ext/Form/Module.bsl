
&НаСервереБезКонтекста
Функция ПолучитьСуммуСпецификации(Спецификация)

	Возврат Спецификация.СуммаДокумента;

КонецФункции 

&НаКлиенте
Процедура ПолучитьСуммуДоговора()

	Объект.СуммаДокумента = Объект.СуммаДокументаБезСкидки - Объект.СуммаДокументаБезСкидки * Скидка / 100;

КонецПроцедуры

&НаКлиенте
Процедура СпецификацияПриИзменении(Элемент)
	
	Объект.СуммаДокументаБезСкидки = ПолучитьСуммуСпецификации(Объект.Спецификация);
	ПолучитьСуммуДоговора();
	
КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	
	ИзменениеДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	ПлатежиДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ИзменениеДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	ПлатежиДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура СкидкаПриИзменении(Элемент)
	
	ПолучитьСуммуДоговора();
	
КонецПроцедуры

&НаКлиенте
Процедура ОбработкаВыбора(ВыбранноеЗначение, ИсточникВыбора)
	
	ИзменениеДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	ПлатежиДоговора.Параметры.УстановитьЗначениеПараметра("Договор", Объект.Ссылка);
	                          
КонецПроцедуры

&НаКлиенте
Процедура ИзменениеДоговораВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ОткрытьЗначение(Элемент.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура ПлатежиДоговораВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	ОткрытьЗначение(Элемент.ТекущиеДанные.Ссылка);
	
КонецПроцедуры

&НаКлиенте
Процедура СуммаДокументаПриИзменении(Элемент)
	
	Объект.СуммаДокументаБезСкидки = Объект.СуммаДокумента;
	
КонецПроцедуры
